-- Temporarily disable foreign key checks
-- This allows us to safely drop tables even if they are linked by foreign keys
SET FOREIGN_KEY_CHECKS = 0;

-- Delete the tasks table if it already exists
DROP TABLE IF EXISTS tasks;

-- Delete the users table if it already exists
DROP TABLE IF EXISTS users;

-- Re-enable foreign key checks for normal database safety
SET FOREIGN_KEY_CHECKS = 1;


-- Create the USERS table
-- This table stores login information for each user
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,      
  username VARCHAR(50) NOT NULL UNIQUE,  
  password VARCHAR(255) NOT NULL         
);


-- Create the TASKS table
-- This table stores tasks created by users
CREATE TABLE tasks (
  id INT AUTO_INCREMENT PRIMARY KEY,    
  title VARCHAR(255) NOT NULL,          
  user_id INT NOT NULL,                 
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
